{% extends 'layout.njk' %}

{% import "parts/card.njk" as card %}

{% block content %}

{% call card.render('Carrinho', 'cart container') %}

<div class="header">
  <p>Produto</p>
  <p>Pre√ßo</p>
  <p>Qtd.</p>
</div>

<div class="items">
  {% for item in cart.items %}
    <div class="item">
      <a href="/produtos/{{item.product.id}}">
        <img src="{{item.product.img}}" alt="Imagem do produto">
        <span class="title">{{item.product.name}}</span>
      </a>
      <span class="price">{{item.formattedPrice}}</span>
      <div class="quantity-control">
        <form action="/carrinho/{{item.product.id}}/remover" method="POST">
          <button class="remove">
            <i class="material-icons">remove_circle_outline</i>
          </button>
        </form>
        <span class="quantity">{{item.quantity}}</span>
        <form action="/carrinho/{{item.product.id}}/adicionar" method="POST">
          <button class="add">
            <i class="material-icons">add_circle_outline</i>
          </button>
        </form>
      </div>
      <form class="trash" action="/carrinho/{{item.product.id}}/excluir" method="POST">
        <button class="delete">
          <i class="material-icons">delete</i>
        </button>
      </form>
    </div>  
  {% endfor %}
</div>
<div class="total">
  <p>Total</p>
  <span>{{cart.total.formattedPrice}}</span>
</div>

<div class="action">
  <a href="/produtos/buscar" class="button shop">Continuar comprando</a>
  <form class="trash" action="/pedidos" method="POST">
    <button class="button order">
      Realizar Pedido
    </button>
  </form>
</div>

{% endcall %}

{% endblock content %}
